#2018年1月iOS招人心得（附面试题）- 答案整理
本文源自对这篇博客 '2018年1月iOS招人心得（附面试题）<https://www.jianshu.com/p/c362446183ee>' 面试内容的整理, 博主对招聘初中级iOS开发颇有一番研究, 所整理的面试题也很具有代表性. 下面结合互联网和自身理解, 对本文所列面试题答案进行整理.

###1.技术基础
####1、为什么说Objective-C是一门动态的语言？
> 这里的动态和静态是相对的,动态的意思是不需要在编译时确定所有的东西,在运行时也可以动态添加变量,属性,方法和类. Objective-C 可以通过Runtime这个运行时机制,在运行时动态的添加变量,方法和类等,所以说Objective-C是一门动态的语言. 
> Objective-C的动态性，让程序在运行时判断其该有的行为，而不是像c等静态语言在编译构建时就确定下来。它的动态性主要体现在3个方面：
	1.动态类型：如id类型。实际上静态类型因为其固定性和可预知性而使用的特别广泛。静态类型是强类型，动态类型是弱类型，运行时决定接收者。
	2.动态绑定：让代码在运行时判断需要调用什么方法，而不是在编译时。与其他面向对象语言一样，方法调用和代码并没有在编译时连接在一起，而是在消息发送时才进行连接。运行时决定调用哪个方法。
	3.动态载入。让程序在运行时添加代码模块以及其他资源。用户可以根据需要执行一些可执行代码和资源，而不是在启动时就加载所有组件。可执行代码中可以含有和程序运行时整合的新类。

####2、讲一下MVC和MVVM，MVP？
> 	•	Models（模型） — 数据层，或者负责处理数据的 数据接口层。比如 Person 和 PersonDataProvider 类
	•	Views（视图） - 展示层(GUI)。对于 iOS 来说所有以 UI 开头的类基本都属于这层。
	•	Controller/Presenter/ViewModel（控制器/展示器/视图模型） - 它是 Model 和 View 之间的胶水或者说是中间人。一般来说，当用户对 View 有操作时它负责去修改相应 Model；当 Model 的值发生变化时它负责去更新对应 View。
#####MVC
> ![MVC](https://dn-coding-net-production-pp.qbox.me/8d779f6a-265b-43c3-90be-dc9997b9963d.png)
	Controller： 控制器层，它是 Model 和 View 之间的胶水或者说是中间人。一般来说，当用户对 View 有操作时它负责去修改相应 Model；当 Model 的值发生变化时它负责去更新对应 View。
#####MVVM
> ![MVVM](https://dn-coding-net-production-pp.qbox.me/1b8ff549-4fa4-489a-adf3-e8ba52e6bb96.png)
	在MVVM 中，view 和 view controller正式联系在一起，我们把它们视为一个组件
view 和 view controller 都不能直接引用model，而是引用视图模型（viewModel）
viewModel 是一个放置用户输入验证逻辑，视图显示逻辑，发起网络请求和其他代码的地方
#####MVP
> ![MVP](https://dn-coding-net-production-pp.qbox.me/d8ad72b3-f150-4988-af6f-0db785c40793.png)
	MVP 是从经典的模式MVC演变而来，它们的基本思想有相通的地方：Controller/Presenter负责逻辑的处理，Model提供数据，View负责显示。作为一种新的模式，MVP与MVC有着一个重大的区别：在MVP中View并不直接使用Model，它们之间的通信是通过Presenter (MVC中的Controller)来进行的，所有的交互都发生在Presenter内部，而在MVC中View会从直接Model中读取数据而不是通过 Controller。

参考资料:
* <https://blog.coding.net/blog/ios-architecture-patterns>
* <https://www.jianshu.com/p/eedbc820d40a>
* <http://blog.csdn.net/li_shuang_ls/article/details/50176891>
* <https://www.jianshu.com/p/33c7e2f3a613>

3、为什么代理要用weak？代理的delegate和dataSource有什么区别？block和代理的区别?
>1.为什么代理要用weak？
   防止循环引用。例如View有一个协议，需要一个代理实现回调。一个Controller添加这个View，并且遵守协议，成为View的代理。如果不用week，用strong，Controller ->View -> delegate -> Controller，就循环引用了。

>2.代理的delegate和dataSource有什么区别？
   delegate偏重于与用户交互的回调，有那些方法可以供我使用，例如UITableviewDelegate；dataSource偏重于数据的回调，view里面有什么东西，属性都是什么，例如UITableviewDatasource；

>3.block和代理的区别?
> 1.block简介
    在 iOS中， block一共分三种。
  (1)全局静态 block，不会访问任何外部变量，执行完就销毁。

```
    ^{
        NSLog(@"Hello World!");
    }();
```
 
  (2)保存在栈中的 block，当函数返回时会被销毁，和第一种的区别就是调用了外部变量。

```
    [UIView animateWithDuration:3 animations:^{
       
        self.view.backgroundColor = [UIColor redColor];
    }];
``` 
 (3)保存在堆中的 block，当引用计数为 0 时会被销毁。例如按钮的点击事件，一直存在，即使执行过，也不销毁，因为按钮还可能被点击，持有按钮的View被销毁，它才会被销毁。

>2.block优点
    block的代码可读性更好。因为应用block和实现block的地方在一起。代理的声明和实现就分开来了，在两个类中。代理使用起来也更麻烦，因为要声明协议、声明代理、遵守协议、实现协议里的方法。block不需要声明，也不需要遵守，只需要声明和实现就可以了。
  block是一种轻量级的回调，可以直接访问上下文，由于block的代码是内联的，运行效率更高。block就是一个对象，实现了匿名函数的功能。所以我们可以把block当做一个成员变量、属性、参数使用，使用起来非常灵活。像用AFNetworking请求数据和GCD实现多线程，都使用了block回调。

>3.block缺点
    blcok的运行成本高。block出栈需要将使用的数据从栈内存拷贝到堆内存，当然对象的话就是引用计数加1，使用完或者block置nil后才销毁。delegate只是保存了一个对象指针(一定要用week修饰delegate，不然也会循环引用)，直接回调，没有额外消耗。就像C的函数指针，只多做了一个查表动作。
    block容易造成循环引用，而且不易察觉。因为为了blcok不被系统回收，所以我们都用copy关键字修饰，实行强引用。block对捕获的变量也都是强引用，所以就会造成循环引用。
> 4.如何使用
优先使用block。
  如果回调函数很多，多余三个使用代理。
  如果回调的很频繁，次数很多，像UITableview，每次初始化、滑动、点击都会回调，使用代理。
  
参考资料:
* <https://www.jianshu.com/p/6bba9b4a25d5>

4、属性的实质是什么？包括哪几个部分？属性默认的关键字都有哪些？@dynamic关键字和@synthesize关键字是用来做什么的？
> 属性是一个类中用来描述对象的抽象概念。
> 属性包括的部分有setter和getter方法
> 
```
atomic: 
nonatomic:
@synthesize
@dynamic
getter=getterName
setter=setterName
readwrite
readonly
assign
retain
copy
```
>@synthesize
如果没有实现setter和getter方法，编译器将会自动在生产setter和getter方法。

>@dynamic
表示变量对应的属性访问器方法 , 是动态实 现的 , 你需要在 NSObject 中继承而来的 +(BOOL) resolveInstanceMethod:(SEL) sel 方法中指定 动态实现的方法或者函数。
属性修饰其他关键字：

参考
*<http://www.wimhe.com/archives/46>
*<http://www.wimhe.com/archives/47>

5、属性的默认关键字是什么？
>readwrite，assign, atomic

6、NSString为什么要用copy关键字，如果用strong会有什么问题？（注意：这里没有说用strong就一定不行。使用copy和strong是看情况而定的）
>
```
// 深复制
Person *xiaoMing = [[Person alloc] init];
NSMutableString * name = [[NSMutableStringalloc] initWithString:@"xiaoming"];
//name.string = @"xiaoming";
xiaoMing.name = name;
NSLog(@"%@", xiaoMing.name);
[name appendString:@"hah"];

//此时名字这个属性被修改了
NSLog(@"%@", xiaoMing.name);
```
如果用Copy来修饰name这个属性不会改变，
如果使用Strong，当name这个字符串改变的时候，name这个属性也会随着改变。
补充：这其实也是看需求，看被赋值的字符串是否需要随着赋值字符串的变化而变化，而大多数情况下我们不希望被赋值的字符串如某个对象的某个字符串类型的属性会随着赋值字符串的变化而变化。 反之，如果我们希望被赋值的字符串随着赋值字符串的变化而变化，那么我们也可以使用strong来修饰字符串

参考:
*<https://www.jianshu.com/p/499f2927717c>

7、如何令自己所写的对象具有拷贝功能?
8、可变集合类 和 不可变集合类的 copy 和 mutablecopy有什么区别？如果是集合是内容复制的话，集合里面的元素也是内容复制么？
9、为什么IBOutlet修饰的UIView也适用weak关键字？
10、nonatomic和atomic的区别？atomic是绝对的线程安全么？为什么？如果不是，那应该如何实现？
11、UICollectionView自定义layout如何实现？
12、用StoryBoard开发界面有什么弊端？如何避免？
13、进程和线程的区别？同步异步的区别？并行和并发的区别？
14、线程间通信？
15、GCD的一些常用的函数？（group，barrier，信号量，线程同步）
16、如何使用队列来避免资源抢夺？
17、数据持久化的几个方案（fmdb用没用过）
18、说一下AppDelegate的几个方法？从后台到前台调用了哪些方法？第一次启动调用了哪些方法？从前台到后台调用了哪些方法？
19、NSCache优于NSDictionary的几点？
20、知不知道Designated Initializer？使用它的时候有什么需要注意的问题？
21、实现description方法能取到什么效果？
22、objc使用什么机制管理对象内存？

中级Block
1、block的实质是什么？一共有几种block？都是什么情况下生成的？
2、为什么在默认情况下无法修改被block捕获的变量？ __block都做了什么？
3、模拟一下循环引用的一个情况？block实现界面反向传值如何实现？
Runtime
1、objc在向一个对象发送消息时，发生了什么？
2、什么时候会报unrecognized selector错误？iOS有哪些机制来避免走到这一步？
3、能否向编译后得到的类中增加实例变量？能否向运行时创建的类中添加实例变量？为什么？
4、runtime如何实现weak变量的自动置nil？
5、给类添加一个属性后，在类结构体里哪些元素会发生变化？
类结构
1、isa指针？（对象的isa，类对象的isa，元类的isa都要说）
2、类方法和实例方法有什么区别？
3、介绍一下分类，能用分类做什么？内部是如何实现的？它为什么会覆盖掉原来的方法？
4、运行时能增加成员变量么？能增加属性么？如果能，如何增加？如果不能，为什么？
5、objc中向一个nil对象发送消息将会发生什么？（返回值是对象，是标量，结构体）
高级
1、UITableview的优化方法（缓存高度，异步绘制，减少层级，hide，避免离屏渲染）
2、有没有用过运行时，用它都能做什么？（交换方法，创建类，给新创建的类增加方法，改变isa指针）
3、看过哪些第三方框架的源码？都是如何实现的？（如果没有，问一下多图下载的设计）
4、SDWebImage的缓存策略？
5、AFN为什么添加一条常驻线程？
6、KVO的使用？实现原理？（为什么要创建子类来实现）
7、KVC的使用？实现原理？（KVC拿到key以后，是如何赋值的？知不知道集合操作符，能不能访问私有属性，能不能直接访问_ivar）
项目
1、有已经上线的项目么？
2、项目里哪个部分是你完成的？（找一个亮点问一下如何实现的）
3、开发过程中遇到过什么困难，是如何解决的？
学习
1、遇到一个问题完全不能理解的时候，是如何帮助自己理解的？举个例子？
2、有看书的习惯么？最近看的一本是什么书？有什么心得？
3、有没有使用一些笔记软件？会在多平台同步以及多渠道采集么？（如果没有，问一下是如何复习知识的）
4、有没有使用清单类，日历类的软件？（如果没有，问一下是如何安排，计划任务的）
5、平常看博客么？有没有自己写过？（如果写，有哪些收获？如果没有写，问一下不写的原因）
6、有关技术类的问题可以在评论区留言，我重点说一下这轮面试的心得和体会。



